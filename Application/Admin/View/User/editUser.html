<include file="Public/header1"/>
<div class="box-body">
				  <div class="row">
					<div class="col-12">

			<form class="layui-form" action="" id="profile">
			<input type="hidden" name="userid" value="<{$u.id}>">

	 <div class="layui-form-item">	<div class="input-group">
            <span class="input-group-addon">商户名</span>
                <input type="text" class="form-control" name="u[username]" lay-verify="required" autocomplete="off"
						 value="<{$u.username|htmlentities}>"
						 placeholder="用户名"
						 <if condition="$u.id gt 0">disabled="disabled"</if>>
			  </div>  </div>

                 <div class="layui-form-item"> <div class="input-group">
            <span class="input-group-addon">上级代理ID</span>
                <input type="text" class="form-control" name="u[parentid]" lay-verify="required" autocomplete="off"
						 value="<{$u.parentid|htmlentities}>"
						 placeholder="无代理请填0">
			  </div>代理ID减去10000，无代理请填0</div>
                      
              
         <div class="layui-form-item">     
	  <div class="input-group">
				<span class="input-group-addon">姓名：</span>
				  <input type="text" name="u[realname]" lay-verify="required" autocomplete="off"
						 value="<{$u.realname|htmlentities}>"
						 placeholder="姓名"
						 class="form-control">
				</div></div>

			
			  
			  <div class="layui-form-item">
				<div class="input-group">
				<span class="input-group-addon">身份证号：</span>
				  <input type="text" name="u[sfznumber]" lay-verify="required" autocomplete="off" value="<{$u.sfznumber|htmlentities}>" placeholder="身份证号" class="form-control">
				</div>
			  </div>
			  <div class="layui-form-item">
				<div class="input-group">
				<span class="input-group-addon">出生日期：</span>
				  <input class="form-control" name="u[birthday]" placeholder="出生日期" id="birthday" value="<{$u[birthday]|date="Y-m-d",###}>">
				</div>
			  </div>
			  
			  <div class="layui-form-item">
				<div class="input-group">
				<span class="input-group-addon">手机号码：</span>
				  <input type="text" name="u[mobile]"  autocomplete="off" value="<{$u.mobile|htmlentities}>" placeholder="手机号码" class="form-control">
				</div>
			  </div>
			  
			  <div class="layui-form-item">
					<div class="input-group">
				<span class="input-group-addon">联系QQ：</span>
				  <input type="text" name="u[qq]" autocomplete="off" value="<{$u.qq|htmlentities}>" placeholder="联系QQ"
						 class="form-control">
				</div>
			  </div>
			  
			  <div class="layui-form-item">
				<div class="input-group">
				<span class="input-group-addon">Email：</span>
				  <input type="text" name="u[email]" lay-verify="required" autocomplete="off" value="<{$u.email|htmlentities}>" placeholder="Email" class="form-control">
				</div>
			  </div>
			  
                         <div class="layui-form-item">
	<div class="input-group">
            <span class="input-group-addon">谷歌验证码：</span>
          <input type="text" name="u[google_secret_key]" lay-verify="" autocomplete="off" value="<{$u.google_secret_key|htmlentities}>"  placeholder="未绑定" readonly onfocus="this.removeAttribute('readonly');" class="form-control">
        </div>
      </div>   
			  
			  <div class="layui-form-item">
				<div class="input-group">
				<span class="input-group-addon">联系地址：</span>
					  <input type="text" name="u[address]" lay-verify="required" autocomplete="off" value="<{$u.address|htmlentities}>" placeholder="联系地址" readonly onfocus="this.removeAttribute('readonly');" class="form-control">
					</div>
				
			</div>

		<!--<div class="layui-form-item">
				<label class="layui-form-label">登录密码：</label>
				<div class="layui-input-inline">
					<input type="password" name="u[password]" autocomplete="off" value="<{$u.password|htmlentities}>"  readonly onfocus="this.removeAttribute('readonly');" class="layui-input"><div class="layui-form-mid layui-word-aux">若不修改登陆密码，请留空</div>
				</div>
			</div>
<div class="layui-form-item">
				<label class="layui-form-label">登录密码：</label>
				<div class="layui-input-inline">
					<input type="password" name="u[password]" autocomplete="off" value="" placeholder="登录密码" class="layui-input">
				</div>
			</div>-->

  			<div class="layui-form-item layui-form-text">
    			<div class="input-group">
				<span class="input-group-addon">登录IP白名单：</span>
      				<textarea name="u[login_ip]" placeholder="请输入内容" class="form-control"><{$u[login_ip]}></textarea>
    			</div>
  			</div>
              
  			<div class="layui-form-item layui-form-text">
    			<div class="input-group">
				<span class="input-group-addon">支付提交</br> IP白名单：</span>
      				<textarea name="u[pay_ip]" placeholder="提交订单的服务器IP，多个以英文逗号分隔，不填则不限制" class="form-control"><{$u[pay_ip]}></textarea>
    			</div>
  			</div>
              
                <div class="layui-form-item">
                  <label class="layui-form-label">性别：</label>
<div class="layui-input-block">
				  <select name="u[sex]" lay-search="" class="form-control">
					<option value=""></option>
                    <option <if condition="$u['sex'] eq 1">selected</if> value="1">男</option>
					<option <if condition="$u['sex'] eq 0"></if> value="0">女</option>
				  </select>
				</div>
  </div>
			 <div class="layui-form-item">
                  <label class="layui-form-label">类型：</label>
<div class="layui-input-block">
				  <select name="u[groupid]" lay-verify="required" lay-search="" class="form-control select2">
					<option value=""></option>
						<foreach name="groupId" item="v" key="k">
	                      <option <if condition="$u['groupid'] eq $k">selected</if>
							  value="<{$k}>"><{$v}></option>
	                    </foreach>
				  </select>
				</div>
			  </div>

			<div class="layui-form-item">
              <span>代付API接口状态：</span>

				<div class="layui-input-block">
					<input type="radio" name="u[df_api]" lay-filter="df_api" value="1" title="开启" <if
						condition="$u['df_api'] eq 1">checked
				</if>>
					<input type="radio" name="u[df_api]" lay-filter="df_api" value="0" title="关闭" <if
						condition="$u['df_api'] eq 0">checked
				</if>>
				</div>
			</div>
			<div class="layui-form-item" id="df_auto_check" <if  condition="$u['df_api'] eq 0">style="display: none;"</if>>
			<span>代付API自动审核：</span>
			<div class="layui-input-block">
				<input type="radio" name="u[df_auto_check]" lay-filter="df_auto_check" value="1" title="开启" <if
					condition="$u['df_auto_check'] eq 1">checked
			</if>>
				<input type="radio" name="u[df_auto_check]" lay-filter="df_auto_check" value="0" title="关闭" <if
					condition="$u['df_auto_check'] eq 0">checked
			</if>>
			</div>
		</div>
		<div class="layui-form-item" id="df_domain" <if  condition="$u['df_api'] eq 0">style="display: none;"</if>>
		<span>代付域名报备：</span>

				<textarea name="u[df_domain]" placeholder="如：www.baidu.com，多个域名请换行，一行一个域名" class="layui-textarea"><{$u[df_domain]}></textarea>

			<label class="layui-form-label"></label><div class="layui-form-mid layui-word-aux">注意：无需填写http://或https://，也不需要填写具体路径，结尾不加 /，一行一个域名。下级商户只能从这些域名发起代付请求！</div>
		</div>
		<div class="layui-form-item" id="df_ip" <if  condition="$u['df_api'] eq 0">style="display: none;"</if>>
			<span>代付IP报备：</span>

			<textarea name="u[df_ip]" placeholder="如：127.0.0.1，多个IP请换行，一行一个IP" class="layui-textarea"><{$u[df_ip]}></textarea>

		<label class="layui-form-label"></label><div class="layui-form-mid layui-word-aux">注意：请填写发起代付请求的服务器公网IP一行一个IP地址。</div>
		</div>
			<div class="layui-form-item">
				<div class="layui-input-block">
				  	<button class="layui-btn" lay-submit="submit" lay-filter="save"><i class="fa fa-check-square-o"></i> 提交保存</button>
				</div>    </div>
			</form>

        </div></div></div>
<include file="Public/foot"/>
<script>
layui.use(['layer', 'form','laydate'], function(){
  var form = layui.form
  ,laydate = layui.laydate
  ,layer = layui.layer;

    //常规用法
    laydate.render({
        elem: '#birthday'
    });
    form.on('radio(df_api)',function(data){
        if(data.value == 1) {
            $('#df_auto_check').show();
            $('#df_domain').show();
            $('#df_ip').show();
        } else {
            $('#df_auto_check').hide();
            $('#df_domain').hide();
            $('#df_ip').hide();
        }
    });
  //监听提交
  form.on('submit(save)', function(data){
    $.ajax({
		url:"<{:U('User/saveUser')}>",
		type:"post",
		data:$('#profile').serialize(),
		success:function(res){
			if(res.status){
				layer.alert("编辑成功", {icon: 6},function () {
					parent.location.reload();
					var index = parent.layer.getFrameIndex(window.name);
					parent.layer.close(index);
				});
			}else{
                layer.alert("操作失败:" + res.msg, {icon: 5},function (index) {
                    layer.close(index)
                });
			}
		}
	});
    return false;
  });
});
</script>
<!--统计代码，可删除-->
</body>
</html>
